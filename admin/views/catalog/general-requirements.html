<!--
    Description: Display general requirements as drop down boxes divided by Area
		Input: 
		  area: Label for a section of general requirements fitting under and "Area" requirement 				set;
		  area.area: Stores the Area to which a set of requirements belongs;
		Output:
			area: Currently displays all data stored under the broad label "areas";
		Created: Seth Putman 04/22/2016
			With assistance from: Graem Cook;
		Modified:
			04/23/2016:
				Added "groups" accordion inside "areas" accordion;
				Modified names in "areas" accordian for clarity;
				"Area" label changed to "generalRequirements";
				"groups" accordion:
					Uses the scope "generalRequirements.requirements";
					Performs the same function as "areas" accordion, except it pulls data from the "requirements" array inside the the "generalRequirements" array;
				Inserted "items" accordion inside "groups" accordion;
				"items" accordion:
					Currently non-functional;
			04/27/2016:
				Modified "requirements" and "items" accordions to properly display hours
			04/28/2016:
				Major restructuring to everything under the "items" accordion:
					"items" is not longer an accordion;
					"item" field now displayed under "requirements" dropdown;
					radio buttons now displayed inside "requirements" dropdown;
					radio buttons now appropriately display "isWriteIn" and "separator" status;
					Placeholder for edit buttons, remove buttons, and add buttons added;
-->

<h2>Manage General Education Requirements</h2>

<strong>Select an area:</strong>
<div class="form-group">
	<select class="form-control" ng-model="currentlySelected.area">
		<option ng-repeat="(a, area) in areas" ng-selected="a == 0" ng-value="area._id" value="">Area {{area.area}}: {{area.name}}</option>
	</select>
</div>

<strong>Select a requirement:</strong>
<div ng-repeat="area in areas" ng-show="area._id == currentlySelected.area">
	
	<div class="form-group">
		<select class="form-control" ng-model="currentlySelected.group">
			<option ng-repeat="(g, group) in area.requirements" ng-selected="g == 0" ng-value="group._id" value="">{{group.name}}</option>
		</select>
	</div>

	<!--CONTENT-->

	<!--
		04/23/2016 
			Added smaller accordion within "areas" accordion
			Editing names in "groups" accordion to remove conflict in heierarchy
	-->

	<!--"Requirements" accordion-->
	<div ng-repeat="group in area.requirements" ng-show="group._id == currentlySelected.group">

		<h3>
			{{group.name}}: {{group.credit}} hours 
			<!--TITLE -- courtesy of Graem Cook-->
			<button class="btn btn-danger pull-right" ng-click="removeGroup(group._id)">
				<span class="glyphicon glyphicon-trash"></span>
				Delete requirement
			</button>
			<div class="clearfix"></div>
		</h3>

		<!--AND/OR Toggle Buttons-->
		<div class="form-group">
			<div class="btn-group">
					<label class="btn btn-default" ng-model="group.separator" btn-radio="'AND'">Require all items</label>
					<label class="btn btn-default" ng-model="group.separator" btn-radio="'OR'">Require one item</label>
			</div>
		</div>

		<p class="highlight">
			Require
			<strong>
				<span ng-show="group.separator == 'OR'">one item</span>
				<span ng-show="group.separator == 'AND'">all items</span>
			</strong>
			in the list below to satisfy this requirement:
		</p>

		<!--ITEM CONTENT - BUTTONS AND EDITS AND COURSE LIST AND STUFF-->
		<div ng-repeat="(i, item) in group.items">
			<div class="panel panel-default" style="margin-top: 35px">
				<div class="panel-heading">
				<!--Course-list/write-in Buttons-->

					<div class="form-group">
						<strong>Item type:</strong>
						<div class="btn-group-sm">
								<label class="btn btn-default" ng-model="item.isWriteIn" btn-radio="false">Course List</label>
								<label class="btn btn-default" ng-model="item.isWriteIn" btn-radio="true">Write-in</label>
						</div>
					</div>
				</div>
				<div class="accessItems panel-body">

					<div class="coursesDisplay" ng-show="item.isWriteIn == false">

						<div class="btn-group-sm">
							<label class="btn btn-default" ng-model="item.separator" btn-radio="'AND'">Require all courses</label>
							<label class="btn btn-default" ng-model="item.separator" btn-radio="'OR'">Require one course</label>
						</div>

						<span class="label label-warning">
							Require
							<strong>
								<span ng-show="item.separator == 'OR'">one</span>
								<span ng-show="item.separator == 'AND'">all</span>
							</strong>
							of the following courses for this item:
						</span>
						
						<ul>
							<li ng-repeat="(cIndex, course) in item.courses">
								<div class="unequalHours">
									<form class="form-inline">
										<select class="form-control" ng-model="item.courses[cIndex]" ng-options="selectedCourse as selectedCourse.title for selectedCourse in allCourses track by selectedCourse._id">
											<option></option>
										</select>
										
										<!--input type="text" ng-model="item.courses[cIndex]" typeahead="selectedCourse as (selectedCourse.subject.abbreviation + ' ' + selectedCourse.number + ' ' + selectedCourse.title) for selectedCourse in allCourses | filter:$viewValue" class="form-control" typeahead-editable="false" size="50	"-->
										
										<!--select class="form-control" ng-model="currentlySelected.group">
											<option ng-repeat="(g, group) in area.requirements" ng-selected="g == 0" ng-value="group._id" value="">{{group.name}}</option>
										</select-->
										
										<a class="glyphicon glyphicon-trash btn" ng-click="editCourseList = editCourseList"></a>
									</form>
								</div>
							</li>
						</ul>
						
						<div ng-show="item.courses.length == 0">
							Add one or more courses to this item.
						</div>
						
						<div>
							<button class="btn btn-default">
								<span class="glyphicon glyphicon-plus"></span>
								Add course
							</button>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div>
			<button class="btn btn-default">
				<span class="glyphicon glyphicon-plus"></span>
				Add item
			</button>
		</div>

		<br>
		<br>
		<div class="form-group">
			<button class="btn btn-success">
				<span class="glyphicon glyphicon-save"></span>
				Save changes
			</button>
			<button class="btn btn-warning pull-right">
				<span class="glyphicon glyphicon-arrow-left"></span>
				Cancel changes
			</button>
		</div>
		
	</div>

</div>